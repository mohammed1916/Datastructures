<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Scheduling</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        h1 {
            color: #333;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin-bottom: 10px;
        }

        pre {
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>

<body>

    <h1>Course Scheduling</h1>

    <p>This is a simple example of course scheduling using topological sort.</p>

    <h2>Course List</h2>
    <ul id="course-list">
        <!-- Course items will be dynamically added here -->
    </ul>

    <h2>Topological Sort Steps</h2>
    <pre id="topological-sort-steps"></pre>

    <script defer>
        // Example data representing courses and their dependencies
        const courses = [
            { id: 1, name: 'MA3160 Probability and Statistical Methods', prerequisites: [] },
            { id: 2, name: 'RM3151 Research Methodology and IPR', prerequisites: [] },
            { id: 3, name: 'IF3151 Advanced Data Structures and Algorithms', prerequisites: [1] },
            { id: 4, name: 'DS3101 Fundamentals of Data Science', prerequisites: [1] },
            { id: 5, name: 'DS3102 Artificial Intelligence', prerequisites: [3, 4] },
            { id: 6, name: 'IF3152 Advanced Database Management Systems', prerequisites: [5] },
            { id: 7, name: 'CS3201 Machine Learning', prerequisites: [5, 6] },
            { id: 8, name: 'CS3202 Natural Language Processing', prerequisites: [5, 6] },
            { id: 9, name: 'SE3101 Software Engineering', prerequisites: [6] },
            { id: 10, name: 'SE3102 Software Project Management', prerequisites: [9] },
        ];

        // Function to perform topological sort
        function topologicalSort(graph)
        {
            const visited = new Set();
            const stack = [];
            const steps = [];

            function visit(node)
            {
                if (!visited.has(node))
                {
                    visited.add(node);
                    const course = graph.find(course => course.id === node);
                    if (course)
                    {
                        // Visit all neighbors
                        course.prerequisites.forEach(neighbor =>
                        {
                            visit(neighbor);
                        });
                        // After visiting all neighbors, add the current node to the stack
                        stack.push(node);
                        // Record the step
                        steps.push([...stack]);
                    }
                }
            }

            // Visit all nodes in the graph
            graph.forEach(course =>
            {
                visit(course.id);
            });

            // The stack now contains the topologically sorted order
            // Reverse the stack to get the correct order
            const sortedOrder = stack.reverse().map(courseId => graph.find(course => course.id === courseId));

            return { sortedOrder, steps };
        }

        // Display the sorted courses and steps on the webpage
        function displayResults(sortedCourses, sortSteps)
        {
            const courseList = document.getElementById('course-list');
            const topologicalSortSteps = document.getElementById('topological-sort-steps');

            sortedCourses.forEach(course =>
            {
                const listItem = document.createElement('li');
                listItem.textContent = course.name;
                courseList.appendChild(listItem);
            });

            sortSteps.forEach((step, index) =>
            {
                topologicalSortSteps.innerHTML += `<b>Step ${index + 1}:</b> ${step.join(' -> ')}\n`;
            });
        }

        // Perform topological sort on the courses
        const { sortedOrder, steps } = topologicalSort(courses);

        // Display the results on the webpage
        displayResults(sortedOrder, steps);
    </script>

</body>

</html>